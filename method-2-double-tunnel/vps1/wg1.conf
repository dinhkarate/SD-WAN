#===============================================================================
# VPS1 WireGuard Client Configuration (Method 2)
# File: /etc/wireguard/wg1.conf
# Kết nối đến VPS2 để route traffic ra Internet
#===============================================================================

[Interface]
# IP của VPS1 trong WireGuard network (tunnel 2 - với VPS2)
Address = 10.0.1.2/24

# Private key của wg1 (sẽ được tự động thay thế bởi setup.sh)
PrivateKey = <VPS1_WG1_PRIVATE_KEY>

# Không cần ListenPort vì đây là client

#===============================================================================
# PEER: VPS2 (WireGuard Server + NAT)
#===============================================================================
[Peer]
# Public key của VPS2 (lấy từ VPS2 sau khi chạy setup)
PublicKey = <VPS2_PUBLIC_KEY>

# Endpoint: IP public và port của VPS2
Endpoint = VPS2_PUBLIC_IP:51821

# AllowedIPs xác định traffic nào được gửi qua tunnel này
# 0.0.0.0/0 = cho phép gửi BẤT KỲ traffic nào qua tunnel
# Traffic từ PC (10.0.0.0/24) sẽ được forward qua wg1 bởi iptables trong wg0.conf
AllowedIPs = 0.0.0.0/0, ::/0

# Thêm Table và routing riêng để tránh conflict với traffic của VPS1
Table = 51821

# Giữ kết nối sống (quan trọng vì VPS1 là client)
PersistentKeepalive = 25
