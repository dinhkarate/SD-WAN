# VPS1 (103.109.187.182) - Single Interface wg0
# Nhận PC1 và kết nối tới VPS2 trên CÙNG một interface
#
# Kiến trúc Method-1:
#   PC1 (10.10.0.2) ──► VPS1 (10.10.0.1) ──► VPS2 (10.10.0.3) ──► Internet
#                           │
#                           └─ Special IPs ─► eth0

[Interface]
Address = 10.10.0.1/24
ListenPort = 51820
PrivateKey = <VPS1_PRIVATE_KEY>

PostUp = sysctl -w net.ipv4.ip_forward=1
PostUp = /etc/sdwan/scripts/wg0-up.sh
PostDown = /etc/sdwan/scripts/wg0-down.sh

# PC1 - Client
[Peer]
PublicKey = <PC1_PUBLIC_KEY>
AllowedIPs = 10.10.0.2/32

# VPS2 - Exit node (default route cho traffic không match special IPs)
[Peer]
PublicKey = <VPS2_PUBLIC_KEY>
Endpoint = 103.109.187.179:51820
AllowedIPs = 0.0.0.0/0
PersistentKeepalive = 25
